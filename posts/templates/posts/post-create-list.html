{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %} Post Create And Post List {% endblock title %}

{% block content %}

<br>
<div class="col-6 mx-auto">
    <!-- !Post Create Form -->
    <form action="{% url 'posts:post-list-create' %}" class="form-control" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {{form|crispy}}
        <button type="submit" class="btn btn-primary">Send</button><!-- eger form icinde button yazirsansa ve bu form backendde data gonderirse bu formun method deyeri POST olmalidir ve bu form icinde yazilan butonun type deyeri submit olmalidir yadda saxla => type='submit' -->
    </form>
</div>

<br>

{% for obj in object_list %}
    <div class="col-6 mx-auto card">
        {{obj.author}}

        <form action="{% url 'posts:post-list-create' %}" method="POST">
            {% csrf_token %}
            <input type="hidden" name="post_id" value="{{obj.id}}">
            <div class="row">
                <div class="col-4">
                    <button type="submit" class="btn btn-link" style="text-decoration: none;"><!-- eger POST request atirsansa form icinde yazilan butonun type deyeri mutleq sekilde submit olmalidir => yeni type='submit' -->
                        {% if profile not in obj.liked.all %}
                            <i class="far fa-thumbs-up"></i>
                            <span class="ml-2">Like</span>
                        {% else %}
                            <i class="far fa-thumbs-down"></i>
                            <span class="ml-2">Unlike</span>
                        {% endif %}
                    </button>
                    <span>{{obj.liked.all.count}} likes</span>
                </div>
            </div>
        </form>
        
        <div class="col-3 p-2">
            <a href="" class="btn btn-primary">
                <span class="ml-2">
                    <i class="fas fa-search"></i>
                Details</span>
            </a>
        </div>
    
    </div>  
{% endfor %}

{% endblock content %}